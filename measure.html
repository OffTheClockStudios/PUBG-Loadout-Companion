<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PUBG Map Ruler Distance Calculator + Elevation</title>
  <p><a href="index.html" class="btn">Open Weapon Loadout Page</a></p>
  <style>
    :root { --bg:#0f172a; --panel:#111827; --muted:#94a3b8; --text:#e5e7eb; --accent:#3b82f6; }
    * { box-sizing: border-box; }
    body {font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, 'Noto Sans', sans-serif; background: var(--bg); color: var(--text); margin: 0;}
    .wrap { max-width: 880px; margin: 24px auto; padding: 24px; }
    h1 {font-size: 1.9rem; margin: 0 0 8px; text-align:center}
    p.lead { color: var(--muted); margin: 0 0 18px; text-align:center }
    .card { background: var(--panel); border: 1px solid #1f2937; border-radius: 14px; padding: 18px; box-shadow: 0 10px 30px rgba(0,0,0,.25); }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 14px; }
    label { display:block; font-weight:600; margin: 8px 0 6px; }
    input[type="number"] { width: 100%; padding: 12px 14px; border-radius: 10px; border: 1px solid #243244; background: #0b1220; color: var(--text); }
    .row { display:flex; gap:12px; align-items:center; flex-wrap: wrap; }
    .btn { appearance:none; border:1px solid #1f2937; background:#0b1220; color:var(--text); padding:10px 14px; border-radius:10px; cursor:pointer; }
    .btn.primary { background: var(--accent); border-color: transparent; }
    .result { font-size: 2rem; font-weight: 800; letter-spacing:.5px; }
    .muted { color: var(--muted); font-size:.95rem; }
    .list { margin: 8px 0 0; padding: 0; list-style: none; }
    .list li { display:flex; justify-content: space-between; gap: 10px; padding: 10px 12px; border:1px solid #1f2937; background:#0b1220; border-radius:10px; margin-top:8px; }
    .tag { display:inline-block; min-width: 84px; text-align:center; padding: 2px 8px; border-radius: 999px; border:1px solid #1f2937; background:#0a1324; color: var(--muted); }
    code.kbd { background:#0b1220; border:1px solid #1f2937; padding: 2px 6px; border-radius:6px }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>PUBG Map Ruler Distance Calculator</h1>
    <p class="lead">Convert ruler cm → in‑game meters, then see <em>elevation‑adjusted slant ranges</em> for common height differences.</p>

    <div class="card" role="group" aria-labelledby="inputs">
      <div class="grid">
        <div>
          <label for="refCm">How many cm = <strong>100 m</strong> on your map?</label>
          <input id="refCm" type="number" min="0.01" step="0.01" value="4.5" />
          <div class="muted">Example: if one 100 m grid cell is 4.5 cm on your printout, enter <code class="kbd">4.5</code>.</div>
        </div>
        <div>
          <label for="targetCm">Measured map length to target (cm)</label>
          <input id="targetCm" type="number" min="0" step="0.01" value="17.5" />
        </div>
      </div>

      <div class="row" style="margin-top:10px">
        <button class="btn primary" id="calcBtn">Calculate</button>
        <button class="btn" id="resetBtn">Reset</button>
      </div>
    </div>

    <div class="card" style="margin-top:16px">
      <div class="row" style="justify-content:space-between; align-items: flex-end">
        <div>
          <div class="muted">Planar (map) distance</div>
          <div class="result" id="resultMeters">— m</div>
        </div>
        <div style="text-align:right">
          <div class="muted">Formula used</div>
          <div id="formulaText" class="muted">D = 100 × (L_target / L_ref)</div>
        </div>
      </div>
      <div id="explain" class="muted" style="margin-top:8px"></div>
    </div>

    <div class="card" style="margin-top:16px">
      <div class="row" style="justify-content:space-between; align-items:center">
        <div>
          <strong>Elevation‑adjusted slant range</strong>
          <div class="muted">Computed as <em>R = √(D² + h²)</em>, where D is the planar map distance and h is elevation difference (meters).</div>
        </div>
        <div class="muted">Presets: −100, −75, −50, −25, 25, 50, 75, 100 m</div>
      </div>
      <ul class="list" id="elevList"></ul>
    </div>

    <div class="card" style="margin-top:16px">
      <details>
        <summary><strong>Math notes</strong></summary>
        <p>
          Map scaling: if <strong>100 m</strong> corresponds to <strong>L<sub>ref</sub></strong> cm and your measured ruler length is <strong>L<sub>t</sub></strong> cm, then the planar map distance is
          <code>D = 100 × (L<sub>t</sub> / L<sub>ref</sub>)</code> meters.
        </p>
        <p>
          Elevation adjustment assumes straight‑line slant range via the 3‑D Pythagorean relation: <code>R = √(D² + h²)</code> where <code>h</code> is positive when the target is higher and negative when lower. (Only the magnitude affects the slant range.)
        </p>
      </details>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    function computePlanarDistanceMeters(refCm, targetCm) {
      if (!(refCm > 0) || !(targetCm >= 0)) return NaN;
      return 100 * (targetCm / refCm);
    }

    function slantRange(D, h) {
      if (!isFinite(D)) return NaN;
      return Math.hypot(D, h); // sqrt(D^2 + h^2)
    }

    function fmt(n, digits = 1) {
      return isFinite(n) ? n.toLocaleString(undefined, { maximumFractionDigits: digits, minimumFractionDigits: digits }) : '—';
    }

    function renderElevations(D) {
      const presets = [-100, -75, -50, -25, 25, 50, 75, 100];
      const list = $("elevList");
      list.innerHTML = '';
      presets.forEach(h => {
        const li = document.createElement('li');
        const left = document.createElement('span');
        left.innerHTML = `<span class="tag">h = ${h} m</span>`;
        const right = document.createElement('span');
        right.textContent = `${fmt(slantRange(D, h), 1)} m`;
        li.appendChild(left); li.appendChild(right);
        list.appendChild(li);
      });
    }

    function calculate() {
      const refCm = parseFloat($("refCm").value);
      const targetCm = parseFloat($("targetCm").value);
      const D = computePlanarDistanceMeters(refCm, targetCm);

      $("resultMeters").textContent = `${fmt(D, 1)} m`;
      $("formulaText").textContent = `D = 100 × (${isFinite(targetCm)?targetCm:'—'} / ${isFinite(refCm)?refCm:'—'}) = ${fmt(D,1)} m`;
      $("explain").textContent = isFinite(D)
        ? `Scale: 1 cm ≈ ${fmt(100 / refCm, 2)} m; measured ${fmt(targetCm,2)} cm.`
        : 'Please enter valid positive numbers for the reference cm and target cm.';

      renderElevations(D);
    }

    $("calcBtn").addEventListener('click', calculate);
    $("resetBtn").addEventListener('click', () => {
      $("refCm").value = 4.5;
      $("targetCm").value = 17.5;
      calculate();
    });

    // initial render
    calculate();
  </script>
</body>
</html>
